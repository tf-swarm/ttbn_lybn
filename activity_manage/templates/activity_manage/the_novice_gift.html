<html>
	<head>
		<meta charset="UTF-8">
		<link rel="stylesheet" type="text/css" href="/static/css/account_manage.css">
		<link type="text/css" rel="stylesheet" href="/static/css/common.css"/>
		<link rel="stylesheet" type="text/css" href="/static/css/default.css">
		<link type="text/css" rel="stylesheet" href="/static/css/red_popup.css" />
		<link type="text/css" rel="stylesheet" href="/static/css/ht_style.css">
        <link type="text/css" rel="stylesheet" href="/static/css/laydate.css">
		<link type="text/css" rel="stylesheet" href="/static/css/fixed_header.css">

        <script type="text/javascript" src="/static/laydate.js"></script>
	    <script type="text/javascript" src="/static/js/jquery-2.0.0.min.js"></script>
	    <script type="text/javascript" src="/static/js/semantic.min.js"></script>

		<style>
			.head_div {
				margin-left: 20px;
				width: 450px;
				height: 35px;
				margin-top: 15px;
			}
			.head_div span{float: left;  font-size: 18px;  height: 30px; line-height: 30px;color: black;font-weight: 600;}

			.spinner_select option {
				font-size: 18px;
			}

			h1 {
				display: block;
				font-size: 24px;
				line-height: 40px;
				height: 45px;
				float: left;
				color: black;
				font-weight: 600;
			}

			h1 a {
				color: white;
				width: 112px;
				height: 35px;
				background: #1B9AF7;
				border-radius: 3px;
				float: right;
				margin-top: 4px;
			}

			.elapsed_time{
				width: 70px;
				height: 32px;
				line-height: 32px;
				background: #e8e8e8;
				border-radius: 3px 0px 0px 3px;
				float: left;
				font-size: 14px;
				text-align: center;
				font-weight: 600;
			}

			.spinner_select option{font-size: 18px;}

			#close_button{
				display:inline-block;
				width: 20px;
				height: 20px;
				cursor: pointer;
				float: left;
				margin: 8px 8px 8px 18px;
				background: url(/static/images/close_btn.png) no-repeat -220px -315px;
			}
		</style>

	</head>

	<body style="line-height: 0.1em; overflow:auto;">
		<div class="body-div">
			<table width="100%" border="0" align="center" cellpadding="0" cellspacing="0" class="ht_big_bor0">
				<tr>
					<td width="25%" height="40" align="left" valign="middle" bgcolor="#F5F5F5"><strong style="color:#A0A0A0;padding-left:9%;white-space:nowrap;">活动管理 &gt; 新手大礼包</strong></td>
					<td width="25%" align="left" valign="middle" bgcolor="#F5F5F5"></td>
					<td width="60%" align="center" valign="middle" bgcolor="#F5F5F5" class="w_update"></td>
					<td width="15%" align="center" valign="middle" bgcolor="#F5F5F5" class="w_update">
						<a href="javascript:;" id="bn_btn_one" onclick="The_gift()">操作记录</a>
					</td>
				</tr>
				<tr>
					<td colspan="4" valign="top" bgcolor="#FFFFFF">
						<!--主要内容开始-->
						<form action="" method="post" id="form_info">
                             {% csrf_token %}
							<div style="height: 40px; width:100%;margin-left: 30px;margin-top: 20px;">
								<h1 style="width:278px;">新手大礼包——
                                    <a href="javascript:;" id="The_novice_gift" >确认更改</a>
                                </h1>
                                <h1 style="width:265px;margin-left: 60px;">登录提示开关:
                                    <div class="btn_fath clearfix off" onclick="switch_data(this)" id="switch_info" style="float: right;border-radius: 15px;width: 92px;margin-top: 5px;">
		                                <div class="move" data-state="off" style="width:30px;border-radius: 15px;height: 30px;"></div>
		                                <div class="btnSwitch btn1" style="height: 32px;width:40px;"></div>
		                                <div class="btnSwitch btn2 " style="height: 32px;width:40px;"></div>
                           			</div>
                                </h1>
                                <h1 style="width:278px;margin-left: 60px;">显示顺序
                                	<input type="text" name="order" id="" value="{{ order }}" style="border: 1px solid #A0A0A0;height: 36px; width: 80px; text-align: center;font-size: 16px;" />

                                </h1>
							</div>


							<div style="height: 370px; margin: 10px;">
								<div class="head_div" style="width: 100%;">
									<span>活动周期：</span>
									<span class="elapsed_time" style="font-size: 14px;height: 32px;">开始时间</span>
									<input placeholder="请输入日期" style="float: left;height: 32px;font-size: 16px;width: 240px;" id="start" class="laydate-icon" readonly="" value="{{ start_day }}" onclick="laydate({istime: true, format: 'YYYY-MM-DD hh:mm:ss'})" name="start_time">

									<span class="elapsed_time" style="font-size: 14px;height: 32px;margin-left: 40px;">结束时间</span>
									<input placeholder="请输入日期" style="height: 32px;font-size: 16px;width: 240px;" id="end" class="laydate-icon" readonly="" value="{{ end_day }}" onclick="laydate({istime: true, format: 'YYYY-MM-DD hh:mm:ss'})" name="stop_time">
								</div>
								<div class="head_div" style="height: 40px;">
									<span>活动名称：</span>
									<input type="text" name="mail_name" id="mail_name" value="{{ mail_name }}" style="border: 1px solid #A0A0A0;height: 36px; width: 160px; text-align: center;font-size: 16px;" />
								</div>
								<div class="head_div" style="height: 80px;">
									<span>邮件标题：</span>
									<textarea cols="50" rows="15" id="mail_detail" name="mail_detail" placeholder="请输入邮件详情" style="width:210px;height:80px;font-size: 16px;font-weight: 400;">{{ mail_det }}</textarea>
								</div>
								<div class="head_div" style="height: 100px;">
									<span>活动描述：</span>
									<textarea cols="50" rows="15" id="led" name="activity_desc" placeholder="请输入活动描述" style="width:310px;height:160px;font-size: 16px;font-weight: 400;">{{ mail_desc }}</textarea>
								</div>
							</div>

							<div style="height: 1px;width: 100%; height:auto;border-top: 1px #C2C2C2 solid">
								<div style="height: 40px; width:120px;margin-left: 30px; margin-top: 20px;">
									<h1 style="display: block; font-weight: 600; color: black; font-size: 22px;width:223px;line-height: 40px; height: 45px;">活动奖励</h1>
								</div>
								<div style="margin-left: 100px; height:360px;width:100%;display: block;  overflow-y: auto;overflow-x:hidden;" >
                                    <div id="add_div">
                                        {% for info  in reward %}
                                            <div class="div-info" style="width: 91%;">
                                                <div class="btn_model" style="width: 70px;float: left;border:0px;">
                                                    <p>奖励名称</p>
                                                </div>
                                                <select name="rewards_conf" class="props_list_sty" style="float: left;width: 120px;">
                                                    {% for data in give_reward %}
                                                         <option value="{{ data.vale }}" {% if info.option == data.vale %} selected {% endif %} >{{ data.content }}</option>
                                                    {% endfor %}
                                                </select>
                                                <div class="btn_model" style="float: left;margin-left: 18px;border:0px;">
                                                    <p>奖励数量</p>
                                                </div>
                                                <input type="text" name="input_date" value="{{ info.value }}" style="width: 180px;margin-top: 0px;float: left;height:38px;text-align: center;">
                                                <a onclick="$(this).parent().remove();" id="close_button"></a>
                                            </div>
                                        {% endfor %}
                                    </div>
                                    <button class="edit_permission" id="pdd-prize" type="button" style="margin:20px 0px 10px 70px; width: 110px; height: 40px; font-size: 18px;">添加新奖品</button>
								</div>
							</div>
						</form>
						<!--主要内容结束-->
					</td>
				</tr>
			</table>
		</div>


<script type="text/javascript">
    var prizeRowCnt = 1;
    $('#pdd-prize').click(function() {
        var html = [
                '<div class="div-info" style="width: 91%;">',
                '<div class="btn_model" style="width: 70px;float: left;border:0px;">',
                '<p>奖励名称</p>',
                '</div>',
                '<select name="rewards_conf" class="props_list_sty" style="float: left;width: 120px;">',
                '<option value="chip"> 鸟蛋</option>',
                '<option value="diamond"> 钻石</option>',
                '<option value="coupon"> 鸟卷</option>',
                '<option value="202"> 全屏冰冻</option>',
                '<option value="203"> 狂暴</option>',
                '<option value="204"> 超级武器</option>',
                '<option value="205"> 召唤</option>',
                '<option value="220"> 创房卡</option>',
                '<option value="20004001"> 狂怒炎龙1天</option>',
                '<option value="20006001"> 雷鸣宙斯1天</option>',
                '<option value="20007001"> 暗夜魅影1天</option>',
                '<option value="20010001"> 恭贺新春1天</option>',
                '</select>',
                '<div class="btn_model" style="float: left;margin-left: 18px;border:0px;">',
                '<p>奖励数量</p>',
                '</div>',
                '<input type="text" name="input_date" value="" style="width: 180px;margin-top: 0px;float: left;height:38px;text-align: center;"/>',
                '<a onclick="$(this).parent().remove();" id="close_button"></a>',
                '</a>',
                '</div>',
            ].join('');

        prizeRowCnt++;
        $('#add_div').append(html);
    })

    $(function(){
        $('#The_novice_gift').click(function(){
			var ele = $('#switch_info').children(".move");
			if(ele.attr("data-state") == "on"){
				show = 1
			}else if(ele.attr("data-state") == "off"){
				show = 0
				}
			var data_info = $.param({"show":show}) + "&" + $("#form_info").serialize();

            if(confirm("您确定修改新手大礼包?")){
                $.post('/activity_manage/novice_gift/', data_info, function(date) {
                    if ( date.code) {
                        alert(date.info);
                    }
                    else {
                        alert(date.info);
                    }
                });
            }else {
                alert("您取消了修改新手大礼包");
            }

		});
    });

    function The_gift() {
        var URL = "/activity_manage/all_record/?pid=" +"novice_gift_record";
        location.href=URL;
    }

    !function(){
    laydate.skin('molv');//切换皮肤，请查看skins下面皮肤库
    laydate({elem: '#demo'});//绑定元素
    }();
    //日期范围限制
    var start = {
        elem: '#start',
        format: 'YYYY-MM-DD hh:mm:ss',
        //min: laydate.now(), //设定最小日期为当前日期
        max: '2099-06-16', //最大日期
        istime: true,
        istoday: false,
        choose: function(datas){
             end.min = datas; //开始日选好后，重置结束日的最小日期
             end.start = datas //将结束日的初始值设定为开始日
        }
    };
    var end = {
        elem: '#end',
        format: 'YYYY-MM-DD hh:mm:ss',
        // min: laydate.now(),
        max: '2099-06-16',
        istime: true,
        istoday: false,
        choose: function(datas){
            start.max = datas; //结束日选好后，充值开始日的最大日期
        }
    };

    var valid = {
        elem: '#valid',
        format: 'YYYY-MM-DD hh:mm:ss',
        // min: laydate.now(),
        max: '2099-06-16',
        istime: true,
        istoday: false,
        choose: function(datas){
            start.max = datas; //结束日选好后，充值开始日的最大日期
        }
    };
    laydate(start); //valid
    laydate(end);
    laydate(valid);
    //自定义日期格式
    laydate({
        elem: '#test1',
        format: 'YYYY年MM月DD日',
        festival: true, //显示节日
        choose: function(datas){ //选择日期完毕的回调
            alert('得到：'+datas);
        }
    });
    //日期范围限定在昨天到明天
    laydate({
        elem: '#hello3',
        min: laydate.now(-1), //-1代表昨天，-2代表前天，以此类推
        max: laydate.now(+1) //+1代表明天，+2代表后天，以此类推
    });

    function switch_data(th){
		var ele = $(th).children(".move");
		if(ele.attr("data-state") == "on"){
			ele.animate({left: "0"}, 300, function(){
			ele.attr("data-state", "off");
		});
		$(th).removeClass("on").addClass("off");
		}else if(ele.attr("data-state") == "off"){
			ele.animate({left: '60px'}, 300, function(){
				$(this).attr("data-state", "on");
			});
			$(th).removeClass("off").addClass("on");
		}
	}

	$(function () {
		if({{ tips|default:0 }} == 1){
			$('#switch_info').attr("data-state", "on");
			$('#switch_info').removeClass("off").addClass("on");
		}
	});
    </script>

	</body>

</html>